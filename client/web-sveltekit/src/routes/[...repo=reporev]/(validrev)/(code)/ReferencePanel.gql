query ReferencePanel_Usages(
    $repoName: String!,
    $revspec: String!,
    $filePath: String!,
    $rangeStart: PositionInput!,
    $rangeEnd: PositionInput!,
    $symbolComparator: SymbolComparator,
    $first: Int!,
    $afterCursor: String,
) {
    usagesForSymbol(
        symbol: $symbolComparator,
        range: {
            repository: $repoName,
            revision: $revspec,
            path: $filePath,
            start: $rangeStart,
            end: $rangeEnd,
        },
        first: $first,
        after: $afterCursor,
    ) {
        ...ReferencePanel_UsageConnection
        pageInfo {
            hasNextPage
            endCursor
        }
    }
}

fragment ReferencePanel_UsageConnection on UsageConnection {
    nodes {
        ...ReferencePanel_Usage
    }
}


fragment ReferencePanel_Usage on Usage {
    provenance
    usageRange {
        repository
            revision
            path
            range {
                start {
                    line
                        character
                }
                end {
                    line
                        character
                }
            }
    }
    surroundingContent
    usageKind
}
